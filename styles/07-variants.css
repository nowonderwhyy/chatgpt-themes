/* Contrast variant tweaks */
html[data-cosmo-theme="contrast"] #page-header,
html[data-cosmo-theme="contrast"] #stage-sidebar-tiny-bar,
html[data-cosmo-theme="contrast"] .bg-token-sidebar-surface-primary,
html[data-cosmo-theme="contrast"] [class*="bg-token-sidebar-surface-"] {
    background: var(--cosmo-card) !important;
}

/* Midnight - dusky header wash */
html[data-cosmo-theme="midnight"] #page-header {
  background:
    radial-gradient(380px 220px at 78% 0%, color-mix(in oklab, var(--cosmo-accent-2) 14%, transparent), transparent),
    linear-gradient(120deg, color-mix(in oklab, var(--cosmo-accent-1) 10%, transparent) 0%, transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.035) 0%, rgba(12, 32, 64, .22) 56%, transparent),
    color-mix(in oklab, var(--cosmo-card) 92%, rgba(6, 20, 42, .10)) !important;
  border-bottom-color: color-mix(in oklab, var(--cosmo-border) 60%, transparent);
  box-shadow: 0 1px 0 rgba(18, 54, 110, .20), 0 14px 42px rgba(2, 10, 22, .38);
}

/* Nocturne family - twilight header carryover */
html[data-cosmo-theme="nocturne"] #page-header,
html[data-cosmo-theme="nocturne-v2"] #page-header {
  background:
    linear-gradient(180deg, rgba(255,255,255,.03), transparent 55%),
    linear-gradient(90deg,
      color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent),
      color-mix(in oklab, var(--cosmo-accent-2) 3%, transparent)
    ),
    color-mix(in oklab, var(--cosmo-card) 94%, transparent) !important;
  border-bottom-color: color-mix(in oklab, var(--cosmo-border) 70%, transparent);
  box-shadow: var(--cosmo-glow-soft);
}

/* Midnight - aurora rail accents */
html[data-cosmo-theme="midnight"] #stage-slideover-sidebar [__menu-item],
html[data-cosmo-theme="midnight"] #stage-popover-sidebar [__menu-item],
html[data-cosmo-theme="midnight"] a[data-testid^="sidebar-item-"] {
  color: color-mix(in oklab, var(--cosmo-text) 95%, rgba(90, 190, 235, .18));
  text-shadow: 0 0 10px rgba(54, 148, 216, .10);
}
html[data-cosmo-theme="midnight"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="midnight"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="midnight"] a[data-testid^="sidebar-item-"] svg {
  color: color-mix(in oklab, var(--cosmo-accent-2) 58%, var(--cosmo-text) 42%);
  filter: drop-shadow(0 0 6px rgba(60, 170, 235, .16));
}
html[data-cosmo-theme="midnight"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="midnight"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="midnight"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="midnight"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  background: color-mix(in oklab, var(--cosmo-accent-2) 12%, transparent);
  box-shadow: inset 0 0 0 1px rgba(86, 180, 235, .22), 0 4px 12px rgba(2, 12, 24, .36);
}

/* Velvet Noir – stage-lit cabaret header */
html[data-cosmo-theme="velvet-noir"] #page-header {
  background:
    radial-gradient(360px 200px at 16% 0%, color-mix(in oklab, var(--cosmo-accent-1) 18%, transparent), transparent),
    radial-gradient(420px 240px at 86% 6%, color-mix(in oklab, var(--cosmo-accent-2) 16%, transparent), transparent),
    linear-gradient(180deg, rgba(255,255,255,.04) 0%, rgba(28, 4, 30, .54) 60%, transparent),
    color-mix(in oklab, var(--cosmo-card) 96%, rgba(12, 0, 14, .22)) !important;
  border-bottom-color: color-mix(in oklab, var(--cosmo-border) 64%, transparent);
  box-shadow: 0 1px 0 rgba(84, 12, 44, .24), 0 14px 46px rgba(6, 0, 18, .44);
}
html[data-cosmo-theme="velvet-noir"] #page-header button svg,
html[data-cosmo-theme="velvet-noir"] #page-header [role="button"] svg {
  color: color-mix(in oklab, var(--cosmo-accent-2) 52%, var(--cosmo-text) 48%);
  filter: drop-shadow(0 0 8px rgba(255, 94, 170, .25));
}

/* Velvet Noir – velvet rail treatments */
html[data-cosmo-theme="velvet-noir"] #stage-slideover-sidebar [__menu-item],
html[data-cosmo-theme="velvet-noir"] #stage-popover-sidebar [__menu-item],
html[data-cosmo-theme="velvet-noir"] a[data-testid^="sidebar-item-"] {
  font-weight: 460;
  color: color-mix(in oklab, var(--cosmo-text) 88%, #ffcba2 12%);
  text-shadow: 0 0 10px rgba(255, 80, 160, .18);
}
html[data-cosmo-theme="velvet-noir"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="velvet-noir"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="velvet-noir"] a[data-testid^="sidebar-item-"] svg {
  color: color-mix(in oklab, var(--cosmo-text) 80%, var(--cosmo-accent-2) 20%);
  filter: drop-shadow(0 0 8px rgba(255, 94, 170, .22));
}
html[data-cosmo-theme="velvet-noir"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="velvet-noir"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="velvet-noir"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="velvet-noir"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  background:
    linear-gradient(135deg,
      color-mix(in oklab, var(--cosmo-accent-1) 20%, rgba(20, 4, 28, .86)) 0%,
      color-mix(in oklab, var(--cosmo-accent-2) 12%, transparent) 100%);
  box-shadow: inset 0 0 0 1px rgba(255, 118, 198, .28), 0 4px 14px rgba(6, 0, 18, .42);
  color: var(--cosmo-text);
}
html[data-cosmo-theme="velvet-noir"] [__menu-item][aria-current="page"] svg,
html[data-cosmo-theme="velvet-noir"] [__menu-item][data-selected="true"] svg,
html[data-cosmo-theme="velvet-noir"] a[data-testid^="sidebar-item-"][aria-current="page"] svg,
html[data-cosmo-theme="velvet-noir"] a[data-testid^="sidebar-item-"][data-selected="true"] svg {
  color: color-mix(in oklab, var(--cosmo-text) 82%, var(--cosmo-accent-2) 18%);
  filter: drop-shadow(0 0 10px rgba(255, 94, 170, .28));
}

/* Velvet Noir – smoky cradle for code */
html[data-cosmo-theme="velvet-noir"] #thread pre {
  background: rgba(22, 4, 30, .86);
  border-color: color-mix(in oklab, var(--cosmo-border) 72%, transparent);
  box-shadow: inset 0 0 0 1px rgba(255, 118, 198, .22);
}
html[data-cosmo-theme="velvet-noir"] #thread code:not(pre code) {
  background: rgba(255, 118, 198, .16);
  border-color: color-mix(in oklab, var(--cosmo-border) 64%, transparent);
  color: color-mix(in oklab, var(--cosmo-text) 88%, #ffd5b0 12%);
}

/* --- Mocha fine-tuning for long reads --- */
html.dark[data-cosmo-theme="mocha"]::after{
    background:
        radial-gradient(70% 48% at 112% 120%, rgba(34,18,6,.42), transparent 68%),
        radial-gradient(88% 66% at 48% 118%, rgba(108, 74, 44, .30), transparent 62%),
        radial-gradient(52% 38% at 48% -8%, rgba(248, 228, 198, .10), transparent 60%),
        conic-gradient(from 140deg at 50% 50%, rgba(214, 166, 104, .12), transparent 44%, rgba(80, 48, 22, .18) 76%, transparent);
    opacity: .92;
}


@media (min-width: 1024px){
  html[data-cosmo-theme="mocha"] #thread { line-height: 1.68; }
}


/* ================= Sidebar Theme Variants ================ */

/* Sunset — espresso rail, copper polish */
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > .sticky.top-0,
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > aside[class*="sticky"],
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > .sticky.bottom-0 {
  border-color: var(--sb-divider);
}
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="sunset"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="sunset"] a[data-testid^="sidebar-item-"] svg {
  color: var(--sb-icon-color);
  filter: brightness(1.06);
}
/* Avatar copper ring on hover */
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > .sticky.bottom-0 :is(img, .avatar, [class*="avatar"], .rounded-full):hover {
  box-shadow: 0 0 0 1px var(--sb-accent-bar);
  border-radius: 9999px;
}

/* Vapor — rim-light hover, teal marker */
html[data-cosmo-theme="vapor"] #stage-slideover-sidebar [__menu-item]:hover,
html[data-cosmo-theme="vapor"] #stage-popover-sidebar [__menu-item]:hover,
html[data-cosmo-theme="vapor"] a[data-testid^="sidebar-item-"]:hover {
  background: transparent !important;
}
html[data-cosmo-theme="vapor"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="vapor"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="vapor"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="vapor"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
}

/* Mocha — ivory glyphs, bronze structure */
html[data-cosmo-theme="mocha"] #stage-slideover-sidebar [__menu-item],
html[data-cosmo-theme="mocha"] #stage-popover-sidebar [__menu-item],
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"] {
  font-weight: 460;
  color: color-mix(in oklab, var(--cosmo-text) 92%, #f1d3a0 8%);
  text-shadow: 0 0 10px rgba(56, 32, 14, .22);
}
html[data-cosmo-theme="mocha"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="mocha"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"] svg {
  color: color-mix(in oklab, var(--cosmo-text) 88%, #f2d6ad 12%);
}
html[data-cosmo-theme="mocha"] [__menu-item][aria-current="page"] svg,
html[data-cosmo-theme="mocha"] [__menu-item][data-selected="true"] svg,
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"][aria-current="page"] svg,
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"][data-selected="true"] svg {
  filter: drop-shadow(0 0 6px rgba(185, 138, 90, .25));
}
html[data-cosmo-theme="mocha"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="mocha"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  background:
    linear-gradient(135deg,
      color-mix(in oklab, var(--cosmo-accent-2) 18%, rgba(40, 24, 12, .85)) 0%,
      color-mix(in oklab, var(--cosmo-accent-1) 12%, transparent) 100%);
  box-shadow: inset 0 0 0 1px rgba(214, 172, 126, .30), 0 4px 12px rgba(14, 8, 4, .30);
  color: var(--cosmo-text);
}
/* Section headers */
html[data-cosmo-theme="mocha"] #stage-slideover-sidebar :is(h2,h3,[role="heading"]) {
  text-transform: uppercase; font-size: 10.5px; letter-spacing: .06em;
  color: color-mix(in oklab, #d2a874 78%, #f4e2c8 22%);
}

/* Mocha - parchment cradle for code blocks */
html[data-cosmo-theme="mocha"] #thread pre {
  background: rgba(52, 34, 18, .82);
  border-color: color-mix(in oklab, var(--cosmo-border) 72%, transparent);
  box-shadow: inset 0 0 0 1px rgba(214, 172, 126, .18);
}
html[data-cosmo-theme="mocha"] #thread code:not(pre code) {
  background: rgba(214, 172, 126, .16);
  border-color: color-mix(in oklab, var(--cosmo-border) 68%, transparent);
  color: color-mix(in oklab, var(--cosmo-text) 88%, #f1d3a0 12%);
}

/* Sunset - lighten code blocks a touch for warm palettes */
html[data-cosmo-theme="sunset"] #thread pre {
  background: rgba(0,0,0,.31);
  border-color: color-mix(in oklab, var(--cosmo-border) 70%, transparent);
}
html[data-cosmo-theme="sunset"] #thread code:not(pre code) {
  background: rgba(255,255,255,.08);
  border-color: color-mix(in oklab, var(--cosmo-border) 62%, transparent);
}

/* Midnight - deepen code cradle with aqua rim */
html[data-cosmo-theme="midnight"] #thread pre {
  background: rgba(4, 12, 26, .88);
  border-color: color-mix(in oklab, var(--cosmo-border) 68%, transparent);
  box-shadow: inset 0 0 0 1px rgba(68, 150, 220, .15);
}
html[data-cosmo-theme="midnight"] #thread code:not(pre code) {
  background: rgba(14, 38, 64, .42);
  border-color: color-mix(in oklab, var(--cosmo-border) 60%, transparent);
}

/* Petal - airy rose glow for nav items */
html[data-cosmo-theme="petal"] #stage-slideover-sidebar [__menu-item],
html[data-cosmo-theme="petal"] #stage-popover-sidebar [__menu-item],
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"] {
  font-weight: 450;
  color: color-mix(in oklab, var(--cosmo-text) 90%, #ffbfd4 10%);
  text-shadow: 0 0 8px rgba(255, 170, 210, .1);
}
html[data-cosmo-theme="petal"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="petal"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"] svg {
  color: color-mix(in oklab, var(--cosmo-accent-1) 60%, #ffe1e9 40%);
}
html[data-cosmo-theme="petal"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="petal"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  box-shadow: inset 0 0 0 1px rgba(255, 190, 222, .24);
  background: color-mix(in oklab, var(--cosmo-accent-1) 14%, transparent);
}


/* Burrito - header with warm accent wash */
html[data-cosmo-theme="burrito"] #page-header {
  background:
    radial-gradient(420px 260px at 18% 0%, color-mix(in oklab, var(--cosmo-accent-1) 16%, transparent), transparent),
    radial-gradient(380px 240px at 82% 6%, color-mix(in oklab, var(--cosmo-accent-2) 18%, transparent), transparent),
    linear-gradient(180deg, rgba(255,255,255,.045) 0%, rgba(18, 6, 32, .58) 60%, transparent),
    color-mix(in oklab, var(--cosmo-card) 94%, transparent) !important;
  border-bottom-color: color-mix(in oklab, var(--cosmo-border) 74%, transparent);
  box-shadow: inset 0 -1px 0 rgba(255, 255, 255, .03), 0 18px 46px rgba(6, 2, 18, .45);
}

html[data-cosmo-theme="burrito"] #page-header button svg,
html[data-cosmo-theme="burrito"] #page-header [role="button"] svg {
  color: color-mix(in oklab, var(--cosmo-text) 88%, var(--cosmo-accent-1) 12%);
  filter: drop-shadow(0 0 6px rgba(255, 132, 224, .32));
}

