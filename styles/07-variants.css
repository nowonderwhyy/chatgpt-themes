/* Contrast variant tweaks */
html[data-cosmo-theme="contrast"] #page-header,
html[data-cosmo-theme="contrast"] #stage-sidebar-tiny-bar,
html[data-cosmo-theme="contrast"] .bg-token-sidebar-surface-primary,
html[data-cosmo-theme="contrast"] [class*="bg-token-sidebar-surface-"] {
    background: var(--cosmo-card) !important;
}

/* Midnight — extra subtle header accents for seamless blend */
html[data-cosmo-theme="midnight"] #page-header,
html[data-cosmo-theme="nocturne"] #page-header,
html[data-cosmo-theme="nocturne-v2"] #page-header {
  background:
    linear-gradient(180deg, rgba(255,255,255,.03), transparent 55%),
    linear-gradient(90deg,
      color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent),
      color-mix(in oklab, var(--cosmo-accent-2) 3%, transparent)
    ),
    color-mix(in oklab, var(--cosmo-card) 94%, transparent) !important;
  border-bottom-color: color-mix(in oklab, var(--cosmo-border) 70%, transparent);
  box-shadow: var(--cosmo-glow-soft);
}

/* --- Mocha fine-tuning for long reads --- */
html.dark[data-cosmo-theme="mocha"]::after{
    background:
        radial-gradient(60% 45% at 115% 115%, rgba(0,0,0,.30), transparent 62%),
        radial-gradient(90% 70% at 50% 120%, rgba(32,24,19,.24), transparent 60%),
        radial-gradient(50% 40% at 50% -10%, rgba(245,236,224,.05), transparent 60%);
    opacity: .9;
}


@media (min-width: 1024px){
  html[data-cosmo-theme="mocha"] #thread { line-height: 1.68; }
}


/* ================= Sidebar Theme Variants ================ */

/* Sunset — espresso rail, copper polish */
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > .sticky.top-0,
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > aside[class*="sticky"],
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > .sticky.bottom-0 {
  border-color: var(--sb-divider);
}
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="sunset"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="sunset"] a[data-testid^="sidebar-item-"] svg {
  color: var(--sb-icon-color);
  filter: brightness(1.06);
}
/* Avatar copper ring on hover */
html[data-cosmo-theme="sunset"] #stage-slideover-sidebar nav > .sticky.bottom-0 :is(img, .avatar, [class*="avatar"], .rounded-full):hover {
  box-shadow: 0 0 0 1px var(--sb-accent-bar);
  border-radius: 9999px;
}

/* Vapor — rim-light hover, teal marker */
html[data-cosmo-theme="vapor"] #stage-slideover-sidebar [__menu-item]:hover,
html[data-cosmo-theme="vapor"] #stage-popover-sidebar [__menu-item]:hover,
html[data-cosmo-theme="vapor"] a[data-testid^="sidebar-item-"]:hover {
  background: transparent !important;
}
html[data-cosmo-theme="vapor"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="vapor"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="vapor"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="vapor"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
}

/* Mocha — ivory glyphs, bronze structure */
html[data-cosmo-theme="mocha"] #stage-slideover-sidebar [__menu-item],
html[data-cosmo-theme="mocha"] #stage-popover-sidebar [__menu-item],
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"] {
  font-weight: 450;
}
html[data-cosmo-theme="mocha"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="mocha"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"] svg { color: #F5EFE6; }
html[data-cosmo-theme="mocha"] [__menu-item][aria-current="page"] svg,
html[data-cosmo-theme="mocha"] [__menu-item][data-selected="true"] svg,
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"][aria-current="page"] svg,
html[data-cosmo-theme="mocha"] a[data-testid^="sidebar-item-"][data-selected="true"] svg {
  filter: drop-shadow(0 0 6px rgba(185, 138, 90, .25));
}
/* Section headers */
html[data-cosmo-theme="mocha"] #stage-slideover-sidebar :is(h2,h3,[role="heading"]) {
  text-transform: uppercase; font-size: 10.5px; letter-spacing: .06em;
  color: color-mix(in oklab, #caa078 80%, #F3E9DD 20%);
}

/* Sunset — lighten code blocks a touch for warm palettes */
html[data-cosmo-theme="sunset"] #thread pre {
  background: rgba(0,0,0,.31);
  border-color: color-mix(in oklab, var(--cosmo-border) 70%, transparent);
}
html[data-cosmo-theme="sunset"] #thread code:not(pre code) {
  background: rgba(255,255,255,.08);
  border-color: color-mix(in oklab, var(--cosmo-border) 62%, transparent);
}

/* Petal — airy rose glow for nav items */
html[data-cosmo-theme="petal"] #stage-slideover-sidebar [__menu-item],
html[data-cosmo-theme="petal"] #stage-popover-sidebar [__menu-item],
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"] {
  font-weight: 450;
  color: color-mix(in oklab, var(--cosmo-text) 90%, #ffbfd4 10%);
  text-shadow: 0 0 8px rgba(255, 170, 210, .1);
}
html[data-cosmo-theme="petal"] #stage-slideover-sidebar [__menu-item] svg,
html[data-cosmo-theme="petal"] #stage-popover-sidebar [__menu-item] svg,
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"] svg {
  color: color-mix(in oklab, var(--cosmo-accent-1) 60%, #ffe1e9 40%);
}
html[data-cosmo-theme="petal"] [__menu-item][aria-current="page"],
html[data-cosmo-theme="petal"] [__menu-item][data-selected="true"],
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"][aria-current="page"],
html[data-cosmo-theme="petal"] a[data-testid^="sidebar-item-"][data-selected="true"] {
  box-shadow: inset 0 0 0 1px rgba(255, 190, 222, .24);
  background: color-mix(in oklab, var(--cosmo-accent-1) 14%, transparent);
}

