:root{ 
    /* Global control knobs */
    --cosmo-surface-alpha: .84;       /* card/base translucency (slightly sturdier) */
    --cosmo-surface-alpha-strong: .86; /* used for header/menus */
    --cosmo-blur-strength: 12px;       /* background blur base */
    --cosmo-contrast-boost: 1.07;      /* subtle contrast bump (crisper text/edges) */
    --cosmo-glow-spread: 24px;         /* shadow softness */
    --cosmo-ring-thickness: 1px;       /* inner rim */
    --cosmo-radius-lg: 16px;
    --cosmo-radius-xl: 24px;
    --cosmo-grain-opacity: .10;        /* global grain strength (shared with overlays) */
    --cosmo-grain-scale: 512px;        /* overlay tile size to avoid visible repetition */
}

/* -------------- Base tokens by our theme -------------- */

/* Glassy variant */
html[data-cosmo-theme="glass"] {
    --cosmo-bg:
        radial-gradient(1320px 920px at 12% -28%, rgba(120, 184, 255, .22) 0%, transparent 60%),
        radial-gradient(1240px 880px at 118% 12%, rgba(70, 220, 255, .18) 0%, transparent 62%),
        linear-gradient(190deg, #0a0d15, #111a25);
    --cosmo-surface-alpha: .82;
    --cosmo-card: rgba(18, 22, 30, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #ffffff 26%, rgba(20, 40, 80, .32));
    --cosmo-glow: 0 0 0 1px rgba(130, 190, 255, .22), 0 16px 44px rgba(10, 18, 40, .32);
    --cosmo-glow-soft: 0 0 0 1px rgba(130, 190, 255, .14), 0 10px 28px rgba(10, 18, 40, .26);
    --cosmo-blur-strength: 11px;
    --cosmo-contrast-boost: 1.09;
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(122%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #ecf5ff;
    --cosmo-subtle: #afc4de;

    --sb-rail-bg: color-mix(in oklab, rgb(18, 22, 30) 86%, #1a2d48 14%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 76%, rgba(130, 190, 255, .24));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 62%, var(--cosmo-accent-2) 38%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 8%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 14%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(60, 120, 220, .14);
}

/* Monochrome variant */
html[data-cosmo-theme="mono"] {
    --cosmo-bg:
        radial-gradient(1200px 820px at 10% -24%, rgba(80, 90, 110, .24) 0%, transparent 60%),
        radial-gradient(1180px 820px at 112% 126%, rgba(18, 22, 32, .82) 0%, transparent 58%),
        linear-gradient(188deg, #090a0d, #14181d);
    --cosmo-card: rgba(24, 26, 30, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #f4f6ff 12%, rgba(0,0,0,.64));
    --cosmo-glow: 0 0 0 1px rgba(90, 100, 120, .26), 0 14px 42px rgba(4, 6, 10, .32);
    --cosmo-glow-soft: 0 0 0 1px rgba(90, 100, 120, .16), 0 10px 28px rgba(4, 6, 10, .26);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(118%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f0f1f3;
    --cosmo-subtle: #afb4bc;

    --sb-rail-bg: color-mix(in oklab, rgb(24, 26, 30) 88%, #202630 12%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 72%, rgba(120, 130, 150, .28));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 60%, var(--cosmo-accent-2) 40%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 6%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-1) 12%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(90, 100, 120, .12);
}

/* Sunset (warm) */
html[data-cosmo-theme="sunset"] {
    --cosmo-bg:
        radial-gradient(1280px 860px at 12% -18%, rgba(255, 120, 150, .72) 0%, transparent 60%),
        radial-gradient(1240px 880px at 110% 132%, rgba(255, 168, 60, .74) 0%, transparent 58%),
        linear-gradient(188deg, #140a12, #2a1008);
    --cosmo-card: rgba(42, 22, 18, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #ffe5ce 28%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(255, 178, 120, .26), 0 16px 44px rgba(80, 36, 10, .24);
    --cosmo-glow-soft: 0 0 0 1px rgba(255, 178, 120, .16), 0 10px 30px rgba(80, 36, 10, .18);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(122%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #ffe9db;
    --cosmo-subtle: #f9c9aa;

    --sb-rail-bg: color-mix(in oklab, rgb(42, 22, 18) 78%, #401c20 22%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 72%, rgba(255, 150, 110, .30));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 66%, var(--cosmo-accent-2) 34%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 10%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 18%, transparent);
    --sb-icon-color: color-mix(in oklab, #ffffff 82%, #120400 18%);
    --sb-rail-shadow: inset -1px 0 0 rgba(140, 60, 20, .16);
}

/* Vapor (neon dusk drift) */
html[data-cosmo-theme="vapor"] {
    --cosmo-bg:
        radial-gradient(1360px 940px at 6% -28%, rgba(210, 120, 255, .56) 0%, transparent 60%),
        radial-gradient(1300px 900px at 110% -8%, rgba(90, 150, 255, .38) 0%, transparent 62%),
        radial-gradient(1180px 860px at 52% 132%, rgba(24, 210, 214, .32) 0%, transparent 64%),
        linear-gradient(194deg, #060718, #04111f);
    --cosmo-card: rgba(14, 18, 34, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #dcd4ff 26%, rgba(0,0,0,.60));
    --cosmo-glow: 0 0 0 1px rgba(170, 150, 255, .26), 0 18px 48px rgba(16, 36, 92, .28);
    --cosmo-glow-soft: 0 0 0 1px rgba(170, 150, 255, .16), 0 12px 32px rgba(8, 44, 68, .22);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(130%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f2fbff;
    --cosmo-subtle: #c1f2f8;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(14, 18, 34) 82%, #10283c 18%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 74%, rgba(92, 236, 240, .32));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 62%, var(--cosmo-accent-2) 38%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 14%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 24%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(60, 210, 230, .16);
}

/* High contrast */
html[data-cosmo-theme="contrast"] {
    --cosmo-bg:
        radial-gradient(1180px 820px at 12% -24%, rgba(120, 150, 255, .22) 0%, transparent 60%),
        radial-gradient(1180px 820px at 112% 128%, rgba(30, 40, 70, .28) 0%, transparent 58%),
        linear-gradient(188deg, #08090c, #11131a);
    --cosmo-card: rgba(16, 18, 26, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #f6f8ff 18%, rgba(0,0,0,.72));
    --cosmo-glow: 0 0 0 1px rgba(120, 150, 255, .24), 0 16px 44px rgba(0, 0, 0, .34);
    --cosmo-glow-soft: 0 0 0 1px rgba(120, 150, 255, .16), 0 10px 28px rgba(0, 0, 0, .28);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(122%) contrast(1.12);
    --cosmo-text: #f7f9ff;
    --cosmo-subtle: #aeb6ca;
    --sb-rail-bg: color-mix(in oklab, rgb(16, 18, 26) 90%, #0f1624 10%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 78%, rgba(110, 160, 255, .32));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 64%, var(--cosmo-accent-2) 36%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 9%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 28%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(100, 150, 255, .18);
    --cosmo-surface-alpha: .88;
    --cosmo-blur-strength: 10px;
}

/* Mocha (earthy, cozy) */
html[data-cosmo-theme="mocha"] {
    --cosmo-bg:
        radial-gradient(1280px 860px at 14% -18%, rgba(180, 118, 70, .62) 0%, transparent 60%),
        radial-gradient(1220px 860px at 110% 132%, rgba(110, 62, 34, .54) 0%, transparent 56%),
        linear-gradient(186deg, #1a110c, #2d1b11);
    --cosmo-card: rgba(36, 24, 18, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #f6d8b8 24%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(206, 162, 118, .28), 0 14px 40px rgba(54, 32, 18, .24);
    --cosmo-glow-soft: 0 0 0 1px rgba(206, 162, 118, .18), 0 10px 28px rgba(54, 32, 18, .18);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f6efe3;
    --cosmo-subtle: #e1c8ad;
    --sb-rail-bg: color-mix(in oklab, rgb(36, 24, 18) 82%, #402313 18%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 72%, rgba(190, 120, 70, .32));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 68%, var(--cosmo-accent-2) 32%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 8%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 18%, transparent);
    --sb-icon-color: #f6efe3;
    --sb-rail-shadow: inset -1px 0 0 rgba(120, 70, 30, .16);
}

/* Sakura (cherry-blossom noir) */
html[data-cosmo-theme="sakura"] {
    --cosmo-bg:
        radial-gradient(1280px 860px at 10% -20%, rgba(255, 126, 190, .62) 0%, transparent 60%),
        radial-gradient(1220px 860px at 108% 132%, rgba(255, 190, 140, .56) 0%, transparent 58%),
        linear-gradient(188deg, #140b14, #231025);
    --cosmo-card: rgba(28, 18, 28, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #ffd8eb 22%, rgba(0,0,0,.6));
    --cosmo-glow: 0 0 0 1px rgba(255, 158, 210, .26), 0 14px 40px rgba(90, 32, 80, .20);
    --cosmo-glow-soft: 0 0 0 1px rgba(255, 158, 210, .16), 0 10px 28px rgba(90, 32, 80, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(122%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #fff3fa;
    --cosmo-subtle: #f6c6da;

    /* Sidebar tokens */
    --sb-rail-bg: color-mix(in oklab, rgb(28, 18, 28) 78%, #401534 22%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 74%, rgba(255, 158, 210, .30));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 64%, var(--cosmo-accent-2) 36%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 9%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 18%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(160, 70, 120, .14);
}

/* Petal (pastel lilac rose) */
html[data-cosmo-theme="petal"] {
    --cosmo-bg:
        radial-gradient(1320px 920px at 8% -20%, rgba(238, 182, 255, .62) 0%, transparent 60%),
        radial-gradient(1280px 880px at 112% 130%, rgba(255, 168, 194, .56) 0%, transparent 58%),
        radial-gradient(1040px 780px at 54% 124%, rgba(255, 150, 168, .34) 0%, transparent 66%),
        linear-gradient(190deg, #170713, #2a0a19);
    --cosmo-card: rgba(42, 16, 32, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #ffd8ec 24%, rgba(0,0,0,.6));
    --cosmo-glow: 0 0 0 1px rgba(255, 168, 214, .24), 0 16px 44px rgba(60, 16, 38, .26);
    --cosmo-glow-soft: 0 0 0 1px rgba(255, 168, 214, .16), 0 10px 28px rgba(60, 16, 38, .20);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(123%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #fff4f9;
    --cosmo-subtle: #f8cddc;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(42, 16, 32) 78%, #431527 22%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 74%, rgba(255, 168, 214, .30));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 64%, var(--cosmo-accent-2) 36%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 9%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 16%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(190, 76, 120, .16);
}

/* === Cosmo accents === */
:root { --cosmo-accent-1:#6f7cff; --cosmo-accent-2:#9be7ff; }
html[data-cosmo-theme="glass"]   { --cosmo-accent-1:#77b9ff; --cosmo-accent-2:#c5f2ff; }
html[data-cosmo-theme="mono"]    { --cosmo-accent-1:#7da4ff; --cosmo-accent-2:#a9c7ff; }
html[data-cosmo-theme="sunset"]  { --cosmo-accent-1:#ff8c66; --cosmo-accent-2:#ffd278; }
html[data-cosmo-theme="vapor"]   { --cosmo-accent-1:#b38aff; --cosmo-accent-2:#52f5ff; }
html[data-cosmo-theme="contrast"]{ --cosmo-accent-1:#6cd4ff; --cosmo-accent-2:#ffe769; }
html[data-cosmo-theme="mocha"]   { --cosmo-accent-1:#f2b076; --cosmo-accent-2:#ffd8a6; }
html[data-cosmo-theme="sakura"]  { --cosmo-accent-1:#ff8fc6; --cosmo-accent-2:#ffd6ea; }
html[data-cosmo-theme="petal"]   { --cosmo-accent-1:#d3a6ff; --cosmo-accent-2:#ff9ab6; }

/* Gamma Doppler (iridescent neon) */
html[data-cosmo-theme="gamma"] {
    --cosmo-bg:
        radial-gradient(1320px 920px at 12% -24%, rgba(80, 255, 182, .60) 0%, transparent 58%),
        radial-gradient(1260px 900px at 118% 128%, rgba(24, 140, 132, .48) 0%, transparent 58%),
        radial-gradient(1040px 780px at 54% 124%, rgba(40, 120, 210, .26) 0%, transparent 64%),
        linear-gradient(190deg, #020a07, #041613);
    --cosmo-card: rgba(8, 24, 18, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #8dffd3 26%, rgba(0,0,0,.6));
    --cosmo-glow: 0 0 0 1px rgba(118, 255, 208, .24), 0 18px 48px rgba(10, 52, 36, .30);
    --cosmo-glow-soft: 0 0 0 1px rgba(118, 255, 208, .16), 0 12px 32px rgba(10, 52, 36, .22);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(128%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #e7fff3;
    --cosmo-subtle: #afffda;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(8, 24, 18) 80%, #05352a 20%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 72%, rgba(120, 255, 210, .34));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 68%, var(--cosmo-accent-2) 32%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 12%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 24%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(28, 148, 110, .20);
}
html[data-cosmo-theme="gamma"] { --cosmo-accent-1:#3cff9f; --cosmo-accent-2:#7cfff0; }

/* Orchid (ChatGPT purple companion) */
html[data-cosmo-theme="orchid"] {
    --cosmo-bg:
        radial-gradient(1300px 880px at 6% -24%, rgba(130, 88, 255, .68) 0%, transparent 58%),
        radial-gradient(1250px 840px at 108% 134%, rgba(50, 68, 170, .64) 0%, transparent 56%),
        linear-gradient(185deg, #0d0b18, #171630);
    --cosmo-card: rgba(22, 18, 38, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #d9cfff 26%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(138, 112, 255, .26), 0 14px 42px rgba(38, 20, 120, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(138, 112, 255, .18), 0 10px 30px rgba(38, 20, 120, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f0ebff;
    --cosmo-subtle: #cbbdff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(22, 18, 38) 80%, #3b1f73 20%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 76%, rgba(140,110,255,.30));
    --sb-accent-bar: color-mix(in oklab, #8768ff 58%, #cdbaff 42%);
    --sb-active-bg: color-mix(in oklab, #8a6bff 10%, transparent);
    --sb-hover-rim: color-mix(in oklab, #cdbaff 22%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(70,40,150,.16);
}

html[data-cosmo-theme="orchid"]  { --cosmo-accent-1:#8768ff; --cosmo-accent-2:#cdbaff; }

/* Amethyst (darker royal purple) */
html[data-cosmo-theme="amethyst"] {
    --cosmo-bg:
        radial-gradient(1350px 920px at 10% -24%, rgba(170, 80, 220, .76) 0%, transparent 60%),
        radial-gradient(1280px 880px at 108% 132%, rgba(70, 52, 200, .72) 0%, transparent 58%),
        linear-gradient(188deg, #0b0818, #17122c);
    --cosmo-card: rgba(20, 14, 34, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #f3deff 22%, rgba(0,0,0,.56));
    --cosmo-glow: 0 0 0 1px rgba(168, 110, 250, .24), 0 14px 42px rgba(52, 24, 140, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(168, 110, 250, .16), 0 10px 30px rgba(52, 24, 140, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(121%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f4eeff;
    --cosmo-subtle: #d5c4ff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(20, 14, 34) 78%, #3d1668 22%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 76%, rgba(168,110,250,.30));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 64%, var(--cosmo-accent-2) 36%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 11%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 20%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(82,40,150,.14);
}
/* Accent pairing tuned to the new regal violet + magenta highlights */
html[data-cosmo-theme="amethyst"] { --cosmo-accent-1:#b16cff; --cosmo-accent-2:#ff92dc; }

/* Glacier (icy cyan + steel) */
html[data-cosmo-theme="glacier"] {
    --cosmo-bg:
        radial-gradient(1260px 860px at -8% 6%, rgba(90, 200, 255, .46) 0%, transparent 58%),
        radial-gradient(1240px 860px at 116% 126%, rgba(40, 140, 220, .44) 0%, transparent 56%),
        linear-gradient(190deg, #07121d, #0a1c27);
    --cosmo-card: rgba(16, 24, 34, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #b7ecff 24%, rgba(0,0,0,.6));
    --cosmo-glow: 0 0 0 1px rgba(120, 210, 255, .24), 0 14px 40px rgba(10, 40, 70, .24);
    --cosmo-glow-soft: 0 0 0 1px rgba(120, 210, 255, .16), 0 10px 28px rgba(10, 40, 70, .18);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #e9f8ff;
    --cosmo-subtle: #bfeaff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(16, 24, 34) 84%, #0d2938 16%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 74%, rgba(120, 210, 255, .28));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 68%, var(--cosmo-accent-2) 32%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 9%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 18%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(70, 150, 210, .16);
}
html[data-cosmo-theme="glacier"] { --cosmo-accent-1:#7fe1ff; --cosmo-accent-2:#b9fff2; }

/* Defaults for non-themed contexts */
:root {
    --sb-rail-bg: rgb(21, 23, 28);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: transparent;
    --sb-active-bg: transparent;
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Midnight (deep navy with cool gradient) */
html[data-cosmo-theme="midnight"] {
    --cosmo-bg:
        radial-gradient(1240px 860px at 8% -22%, rgba(110, 150, 255, .36) 0%, transparent 60%),
        radial-gradient(1220px 860px at 112% 132%, rgba(40, 90, 180, .38) 0%, transparent 58%),
        linear-gradient(190deg, #090c16, #121a2c);
    --cosmo-card: rgba(16, 20, 30, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #a6c0ff 22%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(110, 160, 255, .24), 0 14px 42px rgba(16, 40, 100, .24);
    --cosmo-glow-soft: 0 0 0 1px rgba(110, 160, 255, .16), 0 10px 30px rgba(16, 40, 100, .18);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #e8f1ff;
    --cosmo-subtle: #bacaf0;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(16, 20, 30) 88%, #1b2f56 12%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 78%, rgba(110, 160, 255, .26));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 60%, var(--cosmo-accent-2) 40%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 11%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 18%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(80, 130, 230, .12);
}
html[data-cosmo-theme="midnight"] { --cosmo-accent-1:#6aa8ff; --cosmo-accent-2:#a9c4ff; }

/* Nocturne (midnight bloom) */
html[data-cosmo-theme="nocturne"] {
    --cosmo-bg:
        radial-gradient(1360px 920px at 6% -16%, rgba(148, 72, 255, .64) 0%, transparent 58%),
        radial-gradient(1280px 880px at 118% 128%, rgba(38, 104, 240, .36) 0%, transparent 56%),
        radial-gradient(920px 700px at 52% 118%, rgba(226, 94, 220, .22) 0%, transparent 64%),
        linear-gradient(192deg, #07091a, #0e132a);
    --cosmo-card: rgba(18, 16, 40, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #d6c8ff 30%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(118, 132, 255, .24), 0 16px 46px rgba(24, 26, 88, .28);
    --cosmo-glow-soft: 0 0 0 1px rgba(118, 132, 255, .16), 0 12px 32px rgba(24, 26, 88, .20);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(124%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f3f1ff;
    --cosmo-subtle: #c9c1ff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(18, 16, 40) 82%, #1d2053 18%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 74%, rgba(128,110,255,.32));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 64%, var(--cosmo-accent-2) 36%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 12%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 22%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(68, 76, 180, .18);
}
html[data-cosmo-theme="nocturne"] { --cosmo-accent-1:#6481ff; --cosmo-accent-2:#c18aff; }
