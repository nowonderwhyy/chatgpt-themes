:root{ 
    /* Global control knobs */
    --cosmo-surface-alpha: .84;       /* card/base translucency (slightly sturdier) */
    --cosmo-surface-alpha-strong: .86; /* used for header/menus */
    --cosmo-blur-strength: 12px;       /* background blur base */
    --cosmo-contrast-boost: 1.07;      /* subtle contrast bump (crisper text/edges) */
    --cosmo-glow-spread: 24px;         /* shadow softness */
    --cosmo-ring-thickness: 1px;       /* inner rim */
    --cosmo-radius-lg: 16px;
    --cosmo-radius-xl: 24px;
}

/* -------------- Base tokens by our theme -------------- */

/* Glassy variant */
html[data-cosmo-theme="glass"] {
    --cosmo-bg: linear-gradient(120deg, #0e0f14, #0b1116 40%, #0e0f14 100%),
                radial-gradient(1200px 900px at 120% 0%, rgba(255,255,255,.04), transparent 60%);
    --cosmo-surface-alpha: .82;
    --cosmo-card: rgba(18, 20, 26, var(--cosmo-surface-alpha));
    --cosmo-border: rgba(255,255,255,0.12);
    --cosmo-glow: 0 0 0 1px rgba(255,255,255,0.08), 0 12px 36px rgba(0,0,0,0.35);
    --cosmo-glow-soft: 0 0 0 1px rgba(255,255,255,0.06), 0 8px 24px rgba(0,0,0,0.28);
    --cosmo-blur-strength: 10px; /* glass can get milky; keep crisp */
    --cosmo-contrast-boost: 1.08;
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f2f4f8;
    --cosmo-subtle: #a8b0bd;
    --sb-rail-bg: rgb(18, 20, 26);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Monochrome variant */
html[data-cosmo-theme="mono"] {
    --cosmo-bg: linear-gradient(180deg, #0f1114, #0b0d10 60%, #0f1114);
    --cosmo-accent-1:#5a96ff; /* a hair brighter */
    --cosmo-glow-soft: 0 0 0 1px #303744, 0 10px 28px rgba(0,0,0,.32);
    --cosmo-card: rgba(21, 23, 26, var(--cosmo-surface-alpha));
    --cosmo-border: #262a2f;
    --cosmo-glow: 0 0 0 1px #262a2f;
    --cosmo-glow-soft: 0 0 0 1px #2b3240, 0 8px 24px rgba(0,0,0,0.28);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #e6e7e9;
    --cosmo-subtle: #a3a7ad;
    --sb-rail-bg: rgb(21, 23, 26);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    /* subtle cool highlight to lift affordances */
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Sunset (warm) */
html[data-cosmo-theme="sunset"] {
    --cosmo-bg: radial-gradient(1300px 860px at 18% -20%, #65243f 0%, transparent 60%),
                radial-gradient(1200px 900px at 106% 132%, #ff9627 0%, transparent 60%),
                #0b0b12;
    --sb-rail-bg: #19100e;
    --cosmo-card: rgba(34, 25, 19, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #fff 20%, rgba(255, 230, 215, .16));
    --cosmo-glow: 0 0 0 1px rgba(255,175,140,.18), 0 12px 36px rgba(255,140,0,.16);
    --cosmo-glow-soft: 0 0 0 1px rgba(255,175,140,.14), 0 8px 24px rgba(255,140,0,.12);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #ffe9df;
    --cosmo-subtle: #ffcfb7;
    --sb-rail-bg: #1D1411; /* espresso */
    --sb-divider: color-mix(in oklab, #C88B5E 35%, transparent);
    --sb-accent-bar: #C88B5E; /* copper */
    --sb-active-bg: color-mix(in oklab, #C88B5E 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: color-mix(in oklab, #ffffff 78%, #000 22%);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.02);
}

/* Vapor (cool teal/purple) */
html[data-cosmo-theme="vapor"] {
    --cosmo-bg: radial-gradient(1200px 820px at 6% -24%, #3c1a5b 0%, transparent 60%),
                radial-gradient(1200px 820px at 108% 126%, #088282 0%, transparent 60%),
                #0b0b12;
    --cosmo-card: rgba(20, 21, 28, var(--cosmo-surface-alpha));
    /* slightly tighter to avoid neon fringing */
    --cosmo-border: rgba(255,255,255,0.16);
    --cosmo-glow: 0 0 0 1px rgba(154,119,222,.20), 0 12px 36px rgba(42,171,171,.16);
    --cosmo-glow-soft: 0 0 0 1px rgba(154,119,222,.14), 0 8px 24px rgba(42,171,171,.12);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #eafcff;
    --cosmo-subtle: #b3e6e9;
    --sb-rail-bg: #0E1116; /* blue-black rail */
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-2) 85%, #0E1116);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 4%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 22%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: 0 0 0 1px rgba(255,255,255,.02), 0 8px 24px rgba(6,22,28,.36);
}

/* High contrast */
html[data-cosmo-theme="contrast"] {
    --cosmo-bg: #0a0b0e;
    --cosmo-card: rgba(18, 20, 26, var(--cosmo-surface-alpha));
    --cosmo-border: #2b3240;
    --cosmo-glow: 0 0 0 1px #2b3240;
    --cosmo-glow-soft: 0 0 0 1px #2b3240, 0 8px 24px rgba(0,0,0,0.28);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f3f6ff;
    --cosmo-subtle: #c2c9d6;
    --sb-rail-bg: rgb(18, 20, 26);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
    --cosmo-surface-alpha: .88;
    --cosmo-blur-strength: 10px;
}

/* Mocha (earthy, cozy) */
html[data-cosmo-theme="mocha"] {
    --cosmo-bg: radial-gradient(1200px 800px at 14% -16%, #5a3e2b 0%, transparent 58%),
                radial-gradient(1200px 800px at 106% 118%, rgba(200,160,122,.38) 0%, transparent 52%),
                #201813;
    --cosmo-card: rgba(32, 24, 19, var(--cosmo-surface-alpha));
    --cosmo-border: rgba(245, 236, 224, .18);
    --cosmo-glow: 0 0 0 1px rgba(201, 178, 150, .18), 0 12px 36px rgba(80, 54, 34, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(201, 178, 150, .14), 0 8px 24px rgba(80, 54, 34, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f4efe7;
    --cosmo-subtle: #d6c7b6;
    --sb-rail-bg: rgb(32, 24, 19);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: #caa078; /* bronze */
    /* subtle active fill improves scannability */
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 3%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: #F3E9DD;
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Sakura (cherry-blossom noir) */
html[data-cosmo-theme="sakura"] {
    --cosmo-bg:
        radial-gradient(1200px 820px at 10% -18%, #5b1e3b 0%, transparent 60%),
        radial-gradient(1200px 820px at 102% 128%, #c76b3e 0%, transparent 60%),
        #120f14;
    --cosmo-card: rgba(26, 18, 23, var(--cosmo-surface-alpha));
    --cosmo-border: rgba(255, 214, 228, .16);
    --cosmo-glow: 0 0 0 1px rgba(255,170,200,.18), 0 12px 36px rgba(205,110,120,.18);
    --cosmo-glow-soft: 0 0 0 1px rgba(255,170,200,.14), 0 8px 24px rgba(205,110,120,.12);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #fff2f7;
    --cosmo-subtle: #f3c7d9;

    /* Sidebar tokens */
    --sb-rail-bg: rgb(26, 18, 23);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* === Cosmo accents === */
:root { --cosmo-accent-1:#6f7cff; --cosmo-accent-2:#9be7ff; }
html[data-cosmo-theme="glass"]   { --cosmo-accent-1:#6f7cff; --cosmo-accent-2:#9be7ff; }
html[data-cosmo-theme="mono"]    { --cosmo-accent-1:#4a86ff; --cosmo-accent-2:#7dd3fc; }
html[data-cosmo-theme="sunset"]  { --cosmo-accent-1:#ff7a59; --cosmo-accent-2:#ffd38a; }
html[data-cosmo-theme="vapor"]   { --cosmo-accent-1:#8a63d2; --cosmo-accent-2:#34d5d5; }
html[data-cosmo-theme="contrast"]{ --cosmo-accent-1:#9ab6ff; --cosmo-accent-2:#78e2ff; }

/* Gamma Doppler (emerald/obsidian) */
html[data-cosmo-theme="gamma"] {
    --cosmo-bg:
        radial-gradient(1200px 820px at 6% -18%, #083227 0%, transparent 58%),
        radial-gradient(1200px 820px at 108% 128%, #0b4136 0%, transparent 58%),
        #0a0f0e;
    --cosmo-card: rgba(12, 18, 16, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #9fffcf 18%, rgba(0,0,0,.6));
    --cosmo-glow: 0 0 0 1px rgba(60, 255, 170, .20), 0 12px 36px rgba(16, 140, 100, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(60, 255, 170, .14), 0 8px 24px rgba(16, 140, 100, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(118%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #e6fff4;
    --cosmo-subtle: #b6f3d8;

    /* Sidebar */
    --sb-rail-bg: rgb(12, 18, 16);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 85%, #0a0f0e);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}
html[data-cosmo-theme="gamma"] { --cosmo-accent-1:#2cff91; --cosmo-accent-2:#9dffd0; }

/* Orchid (ChatGPT purple companion) */
html[data-cosmo-theme="orchid"] {
    --cosmo-bg:
        radial-gradient(1300px 880px at 6% -24%, rgba(130, 88, 255, .68) 0%, transparent 58%),
        radial-gradient(1250px 840px at 108% 134%, rgba(50, 68, 170, .64) 0%, transparent 56%),
        linear-gradient(185deg, #0d0b18, #171630);
    --cosmo-card: rgba(22, 18, 38, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #d9cfff 26%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(138, 112, 255, .26), 0 14px 42px rgba(38, 20, 120, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(138, 112, 255, .18), 0 10px 30px rgba(38, 20, 120, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f0ebff;
    --cosmo-subtle: #cbbdff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(22, 18, 38) 80%, #3b1f73 20%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 76%, rgba(140,110,255,.30));
    --sb-accent-bar: color-mix(in oklab, #8768ff 58%, #cdbaff 42%);
    --sb-active-bg: color-mix(in oklab, #8a6bff 10%, transparent);
    --sb-hover-rim: color-mix(in oklab, #cdbaff 22%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(70,40,150,.16);
}

html[data-cosmo-theme="orchid"]  { --cosmo-accent-1:#8768ff; --cosmo-accent-2:#cdbaff; }

/* Amethyst (darker royal purple) */
html[data-cosmo-theme="amethyst"] {
    --cosmo-bg:
        radial-gradient(1350px 920px at 10% -24%, rgba(170, 80, 220, .76) 0%, transparent 60%),
        radial-gradient(1280px 880px at 108% 132%, rgba(70, 52, 200, .72) 0%, transparent 58%),
        linear-gradient(188deg, #0b0818, #17122c);
    --cosmo-card: rgba(20, 14, 34, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #f3deff 22%, rgba(0,0,0,.56));
    --cosmo-glow: 0 0 0 1px rgba(168, 110, 250, .24), 0 14px 42px rgba(52, 24, 140, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(168, 110, 250, .16), 0 10px 30px rgba(52, 24, 140, .16);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(121%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f4eeff;
    --cosmo-subtle: #d5c4ff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(20, 14, 34) 78%, #3d1668 22%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 76%, rgba(168,110,250,.30));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 64%, var(--cosmo-accent-2) 36%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 11%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 20%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(82,40,150,.14);
}
/* Accent pairing tuned to the new regal violet + magenta highlights */
html[data-cosmo-theme="amethyst"] { --cosmo-accent-1:#b16cff; --cosmo-accent-2:#ff92dc; }

/* Glacier (icy cyan + steel) */
html[data-cosmo-theme="glacier"] {
    --cosmo-bg:
        radial-gradient(1200px 820px at -10% 10%, #0c2a3a 0%, transparent 60%),
        radial-gradient(1200px 820px at 110% 120%, #165b6d 0%, transparent 60%),
        #0a1117;
    --cosmo-card: rgba(14, 22, 30, var(--cosmo-surface-alpha));
    --cosmo-border: rgba(163, 222, 255, .14);
    --cosmo-glow: 0 0 0 1px rgba(111, 206, 255,.18), 0 12px 36px rgba(31, 140, 178,.22);
    --cosmo-glow-soft: 0 0 0 1px rgba(111, 206, 255,.12), 0 8px 24px rgba(31, 140, 178,.14);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(115%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #eaf7ff;
    --cosmo-subtle: #b9e6ff;

    /* Sidebar */
    --sb-rail-bg: rgb(14, 22, 30);
    --sb-divider: var(--cosmo-border);
    /* tone down brightness of accent bar */
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 85%, #0a1117);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 4%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}
html[data-cosmo-theme="glacier"] { --cosmo-accent-1:#7de3ff; --cosmo-accent-2:#b7ffd8; }

/* Defaults for non-themed contexts */
:root {
    --sb-rail-bg: rgb(21, 23, 28);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: transparent;
    --sb-active-bg: transparent;
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Midnight (deep navy with cool gradient) */
html[data-cosmo-theme="midnight"] {
    --cosmo-bg:
        radial-gradient(1200px 820px at 6% -20%, #14213a 0%, transparent 60%),
        radial-gradient(1200px 820px at 110% 126%, #0f2742 0%, transparent 60%),
        #0a0d14;
    --cosmo-card: rgba(14, 18, 26, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #9ab6ff 18%, rgba(0,0,0,.60));
    --cosmo-glow: 0 0 0 1px rgba(110, 150, 255, .20), 0 12px 36px rgba(16, 46, 110, .20);
    --cosmo-glow-soft: 0 0 0 1px rgba(110, 150, 255, .14), 0 8px 24px rgba(16, 46, 110, .14);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(118%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #e9f0ff;
    --cosmo-subtle: #b8c6ee;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(18, 20, 26) 94%, #4f6dff 6%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 82%, rgba(91,157,255,.18));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 60%, var(--cosmo-accent-2) 40%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 9%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 14%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(91,157,255,.06);
}
html[data-cosmo-theme="midnight"] { --cosmo-accent-1:#5b9dff; --cosmo-accent-2:#b598ff; }

/* Nocturne (midnight + violet highlights) */
html[data-cosmo-theme="nocturne"] {
    --cosmo-bg:
        radial-gradient(1300px 860px at 10% -20%, rgba(70, 42, 150, .78) 0%, transparent 60%),
        radial-gradient(1250px 840px at 112% 132%, rgba(32, 38, 100, .76) 0%, transparent 58%),
        linear-gradient(185deg, #0b0d17, #0f1223);
    --cosmo-card: rgba(18, 16, 32, var(--cosmo-surface-alpha));
    --cosmo-border: color-mix(in oklab, #cdbbff 28%, rgba(0,0,0,.58));
    --cosmo-glow: 0 0 0 1px rgba(150, 120, 255, .24), 0 12px 40px rgba(40, 24, 96, .26);
    --cosmo-glow-soft: 0 0 0 1px rgba(150, 120, 255, .16), 0 10px 28px rgba(40, 24, 96, .18);
    --cosmo-blur: blur(var(--cosmo-blur-strength)) saturate(120%) contrast(var(--cosmo-contrast-boost));
    --cosmo-text: #f2edff;
    --cosmo-subtle: #d0c2ff;

    /* Sidebar */
    --sb-rail-bg: color-mix(in oklab, rgb(21, 23, 26) 84%, #2c1654 16%);
    --sb-divider: color-mix(in oklab, var(--cosmo-border) 74%, rgba(120,96,255,.32));
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-1) 62%, var(--cosmo-accent-2) 38%);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 11%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 20%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(60,36,132,.16);
}
html[data-cosmo-theme="nocturne"] { --cosmo-accent-1:#7a5dff; --cosmo-accent-2:#b58cff; }
