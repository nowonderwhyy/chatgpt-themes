/* -------------- Base tokens by our theme -------------- */
html[data-cosmo-theme="nebula"] {
    --cosmo-bg: radial-gradient(1200px 800px at 12% -18%, #4a3aa3 0%, transparent 60%),
                radial-gradient(1200px 800px at 108% 118%, #0e7ac4 0%, transparent 60%),
                #0b0b12;
    --cosmo-card: rgba(21, 23, 28, 0.7); /* Darker, more opaque for readability */
    --cosmo-border: rgba(255,255,255,0.16);
    --cosmo-glow: 0 0 0 1px rgba(150, 170, 255, 0.22), 0 12px 36px rgba(60, 120, 255, 0.16);
    --cosmo-glow-soft: 0 0 0 1px rgba(150, 170, 255, 0.16), 0 8px 24px rgba(60, 120, 255, 0.12);
    --cosmo-blur: saturate(1.15) blur(10px); /* Increased blur */
    --cosmo-text: #e8ecff;
    --cosmo-subtle: #9aa6c3;
    /* Sidebar tokens */
    --sb-rail-bg: var(--cosmo-card);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: #7E6BFF; /* active marker */
    --sb-active-bg: rgba(126,107,255,.04);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Glassy variant */
html[data-cosmo-theme="glass"] {
    --cosmo-bg: linear-gradient(120deg, #0e0f14, #0b1116 40%, #0e0f14 100%);
    --cosmo-card: rgba(18, 20, 26, 0.75); /* Darker, more opaque */
    --cosmo-border: rgba(255,255,255,0.12);
    --cosmo-glow: 0 0 0 1px rgba(255,255,255,0.08), 0 12px 36px rgba(0,0,0,0.35);
    --cosmo-glow-soft: 0 0 0 1px rgba(255,255,255,0.06), 0 8px 24px rgba(0,0,0,0.28);
    --cosmo-blur: blur(10px);
    --cosmo-text: #f2f4f8;
    --cosmo-subtle: #a8b0bd;
    --sb-rail-bg: var(--cosmo-card);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 3%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Monochrome variant */
html[data-cosmo-theme="mono"] {
    --cosmo-bg: #0e0f11;
    --cosmo-card: rgba(21, 23, 26, 0.72);
    --cosmo-border: #262a2f;
    --cosmo-glow: 0 0 0 1px #262a2f;
    --cosmo-glow-soft: 0 0 0 1px #2b3240, 0 8px 24px rgba(0,0,0,0.28);
    --cosmo-blur: blur(8px);
    --cosmo-text: #e6e7e9;
    --cosmo-subtle: #a3a7ad;
    --sb-rail-bg: var(--cosmo-card);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 3%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Sunset (warm) */
html[data-cosmo-theme="sunset"] {
    --cosmo-bg: radial-gradient(1200px 800px at 12% -14%, #6a2747 0%, transparent 58%),
                radial-gradient(1200px 800px at 106% 118%, #ff9a2e 0%, transparent 58%),
                #0b0b12;
    --cosmo-card: rgba(32, 24, 19, 0.75); /* Darker, more opaque */
    --cosmo-border: rgba(255, 230, 215, .16);
    --cosmo-glow: 0 0 0 1px rgba(255,175,140,.18), 0 12px 36px rgba(255,140,0,.16);
    --cosmo-glow-soft: 0 0 0 1px rgba(255,175,140,.14), 0 8px 24px rgba(255,140,0,.12);
    --cosmo-blur: saturate(1.08) blur(9px);
    --cosmo-text: #ffe9df;
    --cosmo-subtle: #ffcfb7;
    --sb-rail-bg: #1D1411; /* espresso */
    --sb-divider: color-mix(in oklab, #C88B5E 35%, transparent);
    --sb-accent-bar: #C88B5E; /* copper */
    --sb-active-bg: color-mix(in oklab, #C88B5E 3%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: color-mix(in oklab, #ffffff 78%, #000 22%);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.02);
}

/* Vapor (cool teal/purple) */
html[data-cosmo-theme="vapor"] {
    --cosmo-bg: radial-gradient(1200px 800px at 8% -12%, #442066 0%, transparent 58%),
                radial-gradient(1200px 800px at 104% 116%, #0a8a8a 0%, transparent 58%),
                #0b0b12;
    --cosmo-card: rgba(20, 21, 28, 0.75); /* Darker, more opaque */
    --cosmo-border: rgba(255,255,255,0.15);
    --cosmo-glow: 0 0 0 1px rgba(154,119,222,.20), 0 12px 36px rgba(42,171,171,.16);
    --cosmo-glow-soft: 0 0 0 1px rgba(154,119,222,.14), 0 8px 24px rgba(42,171,171,.12);
    --cosmo-blur: saturate(1.1) blur(9px);
    --cosmo-text: #eafcff;
    --cosmo-subtle: #b3e6e9;
    --sb-rail-bg: #0E1116; /* blue-black rail */
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: color-mix(in oklab, var(--cosmo-accent-2) 85%, #0E1116);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-2) 3%, transparent);
    --sb-hover-rim: color-mix(in oklab, var(--cosmo-accent-2) 22%, transparent);
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: 0 0 0 1px rgba(255,255,255,.02), 0 8px 24px rgba(6,22,28,.36);
}

/* High contrast */
html[data-cosmo-theme="contrast"] {
    --cosmo-bg: #0a0b0e;
    --cosmo-card: rgba(18, 20, 26, 0.75);
    --cosmo-border: #2b3240;
    --cosmo-glow: 0 0 0 1px #2b3240;
    --cosmo-glow-soft: 0 0 0 1px #2b3240, 0 8px 24px rgba(0,0,0,0.28);
    --cosmo-blur: blur(8px);
    --cosmo-text: #f3f6ff;
    --cosmo-subtle: #c2c9d6;
    --sb-rail-bg: var(--cosmo-card);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: var(--cosmo-accent-1);
    --sb-active-bg: color-mix(in oklab, var(--cosmo-accent-1) 3%, transparent);
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* Mocha (earthy, cozy) */
html[data-cosmo-theme="mocha"] {
    --cosmo-bg: radial-gradient(1200px 800px at 14% -16%, #5a3e2b 0%, transparent 58%),
                radial-gradient(1200px 800px at 106% 118%, rgba(200,160,122,.38) 0%, transparent 52%),
                #201813;
    --cosmo-card: rgba(32, 24, 19, 0.8); /* Darker, more opaque */
    --cosmo-border: rgba(245, 236, 224, .18);
    --cosmo-glow: 0 0 0 1px rgba(201, 178, 150, .18), 0 12px 36px rgba(80, 54, 34, .22);
    --cosmo-glow-soft: 0 0 0 1px rgba(201, 178, 150, .14), 0 8px 24px rgba(80, 54, 34, .16);
    --cosmo-blur: saturate(1.06) blur(9px);
    --cosmo-text: #f4efe7;
    --cosmo-subtle: #d6c7b6;
    --sb-rail-bg: var(--cosmo-card);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: #caa078; /* bronze */
    --sb-active-bg: transparent; /* prefer bar + icon glow */
    --sb-hover-rim: transparent;
    --sb-icon-color: #F3E9DD;
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}

/* === Cosmo accents === */
:root { --cosmo-accent-1:#6a5cff; --cosmo-accent-2:#00c2ff; }
html[data-cosmo-theme="glass"]   { --cosmo-accent-1:#6f7cff; --cosmo-accent-2:#9be7ff; }
html[data-cosmo-theme="mono"]    { --cosmo-accent-1:#4a86ff; --cosmo-accent-2:#7dd3fc; }
html[data-cosmo-theme="sunset"]  { --cosmo-accent-1:#ff7a59; --cosmo-accent-2:#ffd38a; }
html[data-cosmo-theme="vapor"]   { --cosmo-accent-1:#8a63d2; --cosmo-accent-2:#34d5d5; }
html[data-cosmo-theme="contrast"]{ --cosmo-accent-1:#9ab6ff; --cosmo-accent-2:#78e2ff; }
html[data-cosmo-theme="mocha"]   { --cosmo-accent-1:#c28b6a; --cosmo-accent-2:#f0e1cf; }

/* Defaults for non-themed contexts */
:root {
    --sb-rail-bg: var(--cosmo-card);
    --sb-divider: var(--cosmo-border);
    --sb-accent-bar: transparent;
    --sb-active-bg: transparent;
    --sb-hover-rim: transparent;
    --sb-icon-color: var(--cosmo-text);
    --sb-rail-shadow: inset -1px 0 0 rgba(255,255,255,.03);
}
